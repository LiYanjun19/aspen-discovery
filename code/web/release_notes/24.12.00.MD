## Aspen LiDA Updates
- Fixed a bug causing some users to occasionally be booted from an active session due to an erroneous API return that the user's credentials were invalid. (*KK*)
- Update the record page to add a Request button for records needing Local ILL requests. (DIS-34) (*MDN, KK-G*)
- Update the holds process to use the Local ILL process when configured. (DIS-34) (*MDN, KK-G*)
- If enabled, add a link in the Account Drawer to open up the user's Year In Review. (*KK-G*)

## Aspen Discovery Updates
### Account Updates
- Prevent canceling a hold using cancel all holds or cancel selected holds if it should not be cancelable. (*MDN*)
- Do not show select box for holds that are not cancelable and that cannot be frozen or thawed. (*MDN*)

### API Updates
- Add a new API to retrieve a LocalIllForm Configuration. (DIS-34) (*MDN*)
- Add a new API to submit a Local ILL request. (DIS-34) (*MDN*)
- In User API, added hasYearInReview in getPatronProfile to check if the user has Year In Review available for determining if a link should be displayed in the Account Drawer in Aspen LiDA. (*KK-G*)
- In User API, added yearInReviewName in getPatronProfile to get the library specific name for Year In Review. (*KK-G*)

### Citation Updates
- Add Harvard Citation style to the list that appears in the citation section on each full record. (*AB*)
- Add Harvard Citation style to the dropdown list in the 'Generate Citation' section in the lists section. (*AB*)

### Docker Updates
- The logs directory belongs to the appropriate user (Docker deployment) (*LM*)

### Evergreen Updates
- Allow library subdomains to include numbers when imported from Evergreen. (*MDN*)

### Hoopla Updates
- Add the date first detected to staff view for Hoopla records. (*MDN*)

### Indexing Updates
- Add a new format for Tonies based on a publisher (260b, 264b, 710a) containing Boxine and a title (245a) containing Tonie. (*MDN*)
- Add a new format for Yoto based on a publisher (260b, 264b, 710a) containing Yoto and a title (245a) containing Yoto. (*MDN*)
- When filtering formats, if Zines is active, discard other formats. (DIS-56) (*MDN*)
- When checking for the Zines format, ignore trailing punctuation. (DIS-56) (*MDN*)
- Update Grouped Works Index schema so that searches with '&' and 'and' are treated the same way. (DIS-45) (*KP*)
- Add Regular Expression field for item types to be treated as eContent to Indexing Profiles in order to allow libraries to add to this. All item types currently treated as eContent are included by default. (*AB*)
- Update Solr commit calls to a standard parameter set of `false, false, true` (*KMH*)

<div markdown="1" class="settings">

#### New Settings
- ILS Integration > Indexing Profiles > Treat Item Types As eContent

</div>

### Install Updates
- Add a Mac option to createSite.php for people developing on a Mac. (*KP*)
- Fix running cron updates if available during automated updates. (*MDN*)

### Koha Updates
- Add a fallback value for the 'Library ID' field instead of sending an empty field when submitting Material Requests. (*LM*)
- Fix volumeId check for the items without valid item group when placing volume holds. (*YL*)

### Local ILL (DIS-34)
- Add new settings to configure the Local ILL system in use. (*MDN*)
  - Within library systems, administrators can set the type of Local ILL system to use. None is the default option, and Symphony Demand Management Using Books by Mail is also an option.
  - Within locations, administrators can set the ILL form to be used when making request.
- Update hold groups to not be specific to VDX, so they can be used for both Local ILL and VDX. (*MDN*, *MAF*)
- Add new Local ILL forms to allow configuration of the information that patrons can provide when submitting Local ILL requests. (*MDN*)
- Update the holds process to use the Local ILL process when configured. (*MDN*)
- Local ILL Requests may be limited to a maximum number of requests by library. (*MDN*)
- Update the Symphony driver to allow creating holds using the books by mail process when Symphony Demand Management Using Books by Mail is activated. (*MDN*)
- Update the display of holds for Symphony to show an additional message if the current location is ILL or the mail flag is set to indicate the title is coming from another library. (*MDN*)
- When displaying the out of hold group message, do not show the position of the hold since it is potentially inaccurate. (*MDN*)
- Do not allow holds with a status of ILL_WYLD or ILLSHIPPING to have pickup location changes, be suspended, or be canceled. (*MDN*)
- Correct placing VDX Requests and Local ILL Requests if the initial hold fails for a patron. (*MDN*)
- When supplied, the Note for a Local ILL request will be sent to Symphony as the comment for the hold. (*MDN*)
- Optionally prevent patrons from renewing titles checked out from other hold groups. (*MDN*)

<div markdown="1" class="settings">

#### New Settings
- Primary Configuration > Library Systems > Interlibrary loans > Local ILL Request Type
- Primary Configuration > Library Systems > Interlibrary loans > Maximum Local ILL Requests
- Primary Configuration > Library Systems > ILS/Account Integration > Checkouts > Allow Renewing Out of Hold Group Checkouts
- Primary Configuration > Locations > Interlibrary loans > Local ILL Form
- Interlibrary Loan > Hold Groups
- Interlibrary Loan > Local ILL Forms

</div>

### Koha Updates
- Correct column name when fetching from the user message queue. (*MDN*)

### LibKey (ThirdIron) integration (DIS-60)
  - Add LibKey Settings under Third Party Enhancement (*CZ*)
  - LibKey Settings can be associated with specific libraries (*CZ*)
  - Add an 'Administer LibKey Settings' permission (*CZ*)
  - For eContent records with DOIs, the 'Access Online' button will default to a LibKey-issued direct link to the document if the active library has a LibKey subscription and if the record is found by LibKey (*CZ*)
  - LibKey links are also added under 'Links' on the detailed view for a record (*CZ*)

### Material Request Updates
- Add the ability to Export All requests to CSV. Which exports all requests on all pages for the selected filters. (*MDN*)
- Allow Material Request Statuses to be marked as active to separate requests that should be shown by default to patrons from requests that will count against the maximum number of active requests a patron can have at once. (DIS-61) (*MDN*)
- Allow the Yearly Request Limit to be set based on a calendar year or a rolling year. (DIS-62) (*MDN*)
- Fixes for filters by status and format.
- Fix adding new formats for Materials Requests within Library Settings. (DIS-116) (*MDN*)

<div markdown="1" class="settings">

#### New Settings
- Primary Configuration > Library Systems > Materials Request > Max Active Requests
- Primary Configuration > Library Systems > Materials Request > Yearly Request Limit Type
- Materials Requests > Manage Statuses > Active Status?

</div>

### OverDrive Updates
- Correct error loading OverDrive Scope information for libraries that do not have OverDrive setup for them. (DIS-70) (*MDN*)
- Correct error loading OverDrive Scope information if no libraries have been set up for the scope. (*MDN*)
- Add additional error handling for cases when patrons cannot be logged into OverDrive (DIS-71) (*MDN*)

### Polaris Updates
- Update the site creation process to prompt for connection information and set up a default Account Profile and Indexing Profile for Polaris libraries. (*MDN*)

### Reading History Updates
- Allow users to add titles manually to their reading history. Titles can be added from search results or full record pages by selecting Add To List and then choosing to add to Reading History rather than list. The functionality can be disabled by libraries. (*MDN*)
- For reading history entries with no format, do not display the format row. (*MDN*)
- Do not allow manually adding titles to reading history in masquerade mode if reading history is disabled in Masquerade mode. (DIS-83) (*MDN*)
- Hide reading history menu item if reading history is disabled in Masquerade mode. (DIS-83) (*MDN*)

<div markdown="1" class="settings">

#### New Settings
- Primary Configuration > Library Systems > ILS/Account Integration > Enable Add To Reading History

</div>

### Reports Updates
- Fix blank pages in Student Barcode report printout. (*JStaub*)
- Improve the alignment of the Student Barcode report with Avery 5160 labels. (*JStaub*)

### SideLoad Updates
- Fix processing side loaded records that do not have valid URLs in them. (*MDN*)

### Symphony Updates
- Add the ability to load Hold Groups from Symphony. (*MDN*)
- Add the ability to load Locations from Symphony. (*MDN*)
- Correct setting day phone and home phone to not be overridden based on the phone field. (*MDN*)
- Add the ability to not allow available holds to be cancelled. (*MDN*)
- Do not allow holds that originated from outside the patron's hold group to be canceled when available (if hold groups have been defined in Aspen). (*MDN*)
- When adding a note to Symphony holds, restrict the length to 50 characters to match the limit within Symphony. (*MDN*)
- Do not show blank Wait List line for checkouts. (*MDN*)

<div markdown="1" class="settings">

#### New Settings
- Primary Configuration > Library Systems > ILS / Account Integration > Holds > Allow Cancelling Available Holds

</div>

### System Variables Updates
- Added a new option to prevent Aspen from blocking spammy Ip Addresses (*LM*)

<div markdown="1" class="settings">

#### New Settings
- System Administration > System Variables > IP Addresses > Disable IPs Spammy Control

</div>

### Testing Updates
- Add the ability to generate test material requests similar to how test reading history is generated. (*MDN*)

### Web Builder Updates
- Remove edit button in admin view of Grapes JS Pages as breadcrumbs allow navigation back to the editor and are in keeping with the rest of Aspen. (*AB*)
- Added tooltips to the buttons in the top menu bar of the GrapesJS editor that did not have them as default. (*AB*)
- Added the ability to add styles to the body element in the GrapesJS editor. (*AB*)
- Added a custom Headers section with custom blocks for H1, H2 and H3 to the GrapesJS editor. (*AB*)
- Add the ability for users to control whether the title they assign to their Grapes JS page is displayed when viewing as a page. (*AB*)

<div markdown="1" class="settings">

#### New Settings
- Web Builder > Grapes Pages > Display Title on Page

</div>

### Year In Review Updates (DIS-74)
- Create new settings to configure Year in the Review functionality. (*MDN*)
- Update Patron Types so Year in Review functionality can be enabled or disabled by Patron Type. (*MDN*)
- After a patron logs in, check to see if they should see the Year In Review functionality and if so, display a message to the user and add a link from the account sidebar and account menu. (*MDN*)
- When selecting Year in Review, display a slideshow to the user based on data loaded from their account. (*MDN*)
  - Slides are based on a configuration file that can be updated each year.
  - Year In Review has two distinct styles for 2024. Each library can choose which to use within the settings.
  - Data is loaded from the patron account and overlaid onto background images.
- Generate slide data for top author, top genres, top series, top formats, and for recommendations for next year. (*KP*)
- Dismiss old Year in Review messages so that only one is shown at a time (*KP*)
- Added a direct route to Year In Review, if available, for user MyAccount/YearInReview that can be opened from Aspen LiDA. (*KK-G*)
- Create a new cron task to dismiss old Year In Review messages on the set end date. (*KP*)

<div markdown="1" class="settings">

#### New Permissions
- Year in Review > Administer Year in Review for All Libraries
- Year in Review > Administer Year in Review for Home Library

#### New Settings
- Local Catalog Enrichment > Year in Review
- Primary Configuration > Patron Types > Enable Year In Review

</div>

### Other Updates
- Remove extraneous vertical lines when showing modal dialog. (*MDN*)
- Create a new large modal that fills more of the screen. (*MDN*)
- Allow modal dialogs to be shown without the title bar. (*MDN*)
- Add additional error handling when searching the database (DataObject find method). (*MDN*)
- Add the ability to display alert boxes within forms. (*MDN*)
- Fix so tooltips work within the modal dialog. (*MDN*)
- Remove the display of patron types to show a menu item for when viewing the list of all menu items within library settings. (*MDN*)
- Remove unused old SSO fields from the library table. (DIS-63) (*MDN*)
- Redirect to selfRegistrationUrl if the /MyAccount/SelfReg URL is accessed directly.(*PA*)
- Remove old database update scripts for versions that are more than a year old. (*MDN*)

## This release includes code contributions from
### ByWater Solutions
  - Kyle Hall (KMH)
  - Yanjun Li (YL)

### Grove For Libraries
  - Mark Noble (MDN)
  - Kirstien Kroeger (KK-G)
  - Katherine Perdue (KP)
  - Myranda Fuentes (MAF)

### Nashville Public Library
  - James Staub (JStaub)

### PTFS-Europe
  - Alexander Blanchard (AB)
  - Chloe Zermatten (CZ)
  - Pedro Amorim (PA)

### Theke Solutions
  - Lucas Montoya (LM)

### Independent
  - Kirstien Kroeger (KK)

## Year In Review Design thanks to
- Myranda Fuentes
- Morgan Daigneault
- Kate Lozyk

## Special Testing thanks to
- Myranda Fuentes (Grove)
- Bryan Jones (Nashville Public Library)
- James Staub (Nashville Public Library)
- Janeal Walker (Metropolitan Public Library)
- Kate Lozyk (ByWater Solutions)
- Lauren Conley (ByWater Solutions)
- Jordan Fields (Grove)
- Kal Marquise
- Sierra Chastain-Rittue (CW MARS)
- Tricia Andrews (Metropolitan Public Library)

## Special Documentation thanks to
- Myranda Fuentes (Grove)
- Jordan Fields (Grove)
- Kal Marquise

## Includes sponsored developments from
- San Luis Obispo County Library
- Milwaukee County Federated Library System
- Wyoming State Library
